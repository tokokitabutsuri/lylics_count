<!DOCTYPE html>

<head>
    <meta name="robots" content="noindex,nofollow">
</head>

<body>
    <div>ここに歌詞を入力</div>
    <textarea id="lylics" style="width: 80vw;height: 50vh;"></textarea><br>
    <!--<input id="num" type="number" value="10" style="margin-right: 30px;width: 100px;">--><button
        id="count">計測</button>
    <input type="text" id="reptext" style="margin-right: 50px;">
    <button id="rep">置換</button>
    <hr>
    <div id="ans"></div>
    <script src="kuromoji/kuromoji.js"></script>
    <script>               // インスタンス生成

        document.getElementById('count').addEventListener('click', () => {
            let count = []
            let countedword = []
            var inputlylics = document.getElementById('lylics').value;
            let newsegs = [];
            //var zyogai = /。|て|だ|た|が|の|を|に|の|に|と|や|は|も|こそ|でも|ばかり|まで|だけ|ほど|ば|と|ても|でも|けれど|けれども|か|な|とも|の|さ|や|よ|を|の|から|ぞ|ほど/

            kuromoji.builder({ dicPath: './kuromoji/dict/' }).build((err, tokenizer) => {
                const tokens = tokenizer.tokenize(inputlylics);// 解析データの取得
                newtokens = Array.from(new Set(tokens.map((obj) => obj.pos)))
                console.log(tokens)
            });
/*
            for (const seg of segs) {
                if (!(/\s+/.test(seg) || zyogai.test(seg))) {
                    newsegs.push(seg);
                }
            }
            for (const seg of newsegs) {
                let a = countedword.indexOf(seg);
                if (a == -1) {
                    countedword.push(seg);
                    count.push(1);
                } else {
                    count[a] += 1;
                }
            }
            const aryMax = function (a, b) { return Math.max(a, b); }
            let max = count.reduce(aryMax);
            let i = 0;
            let ans = ""
            for (const reg of countedword) {
                if (count[i] == max) {
                    ans = ans + reg + '\n';
                }
                i++;
            }
            console.log(count)
            console.log(countedword)
            console.log(newsegs)
            console.log(ans)
            document.getElementById('ans').innerText = ans;*/
        })

        document.getElementById('rep').addEventListener('click', () => {
            const inp = document.getElementById('lylics');
            inp.value = inp.value.replaceAll(document.getElementById('reptext').value, '。');
        })

        //alert(segs.join(" | "));  // 表示
    </script>
</body>